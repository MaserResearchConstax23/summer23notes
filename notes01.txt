
Notes

May 22, 2023

    Celestial Coordinates

        RA (right ascension) - positive is CCW, 360 deg == 24 hrs

        Declination - in degrees minutes seconds

    Laser , maser

        Laser means "Light amplification by Stimulated Emmsion of Radiation"

        In lasers, all light has similar wavelengths and the waves travel together
        in phase

        Maser means "Microwave/molecular amplification by stimulated emission of
        radiation", and is a subset of lasers in the microwave or other
        invisible spectrum wavelength range. 

        Despite their name, masers are not limited to microwave range, and can
        exist in other frequencies (radio and IR)

        Laser are specifically in the visible spectrum

        Natural masers are referred to as "superradiant emmision" since they are
        not artificial masers

        There are masers produced by galaxies which are much more powerful than
        masers produced by stars; they are called "megamasers"

        Water masers emit as 22 GHz from a population inversion in which more of
        the molecules are more excited than their natural state than not.

    Questions:

    1) If the light travels at a constant rate, and the universe is expanding
    exponentially, and the light passes through expanding space, then doesn't
    that mean that objects are actually much farther than the light-year
    measurement we can read currently, due to already-traveled space expanding
    behind the traveling light? I would imagine that a correction becomes
    necessary especially for objects that are viewed in the distant past/edge of
    the visible universe. Is the correction to simply let a unit expand at the
    same rate as the universe expands, such that, in the past, a light-year was
    much smaller? 
    
    - there are different models of the universe's distance scales
    as they relate to time, the important thing is to use the same scale when
    doing comparisons

    2) Since time passes more slowly in areas of higher matter density
    (gravity), then the early universe must have had a very slow rate of time
    passage compared to our present; so does that mean that the universe could
    be thought of as much younger than it appears?

    --------
    Important Formulas:
        λ = wavelength
        c = speed of light
        ν = frequency
        E = Energy
        h = planks constant = 6.62607015 × 10^-34 m^2 kg / s
        T = temperature in Kelvin
        F = Energy Flux ... J/m^2/s
        σ = Stephan-Boltzman constant = 5.67E-8 W/m^2/K^4
        I_tot = total intensity = Energy Flux
        
        
        λ = c/ν
        E = h ν

        Light Intensity = energy/(time*area)

 

    Black body - Anything that has a Temperature is a "Black Body". 
    
    color can be determined from λ

    - All objects emit heat radiation, and the intensity of the radiation
    reveals its temperature

    - For black bodies, which have a characteristic shape of radiation, the
    wavelength at which there is the maximum intensity relates to the
    temperature of the black body. Stars are black bodies

    1) Wien's Law - Hotter objects emit radiation with shorter λ and higher ν

        λ_max = .0029 K m / T

    2) Stephan-Boltzmann's law - Hotter objects overall emit more light at all
    frequencies per unit area.
        - Refers to the total energy given off by a black body

        I_tot == F == σ T^4

    When you graph Intensity vs wavelength for a black body such as a star, the
    overall shape of the graph corresponds to the black body model, but there
    are inconsistencies at specific wavelengths which deviate from the model,
    they are called "absorption features".

    When a photon hits an atom with the exact amount of energy needed to raise
    an electron to the next energy state, then the photon will be absorbed and
    the electron will raise to a more-excited energy state.

    Each type of atom has a unique set of energy levels, so gaps in a wavelength
    graph will correspond to the particular atom that absorbed those wavelengths
    of light from the blackbody, leaving a chemical fingerprint of the
    composition of gasses in a star's atmosphere ... or any other matter that
    might be blocking the path of the light.

    -- I assume that we can determine the composition of a gas/dust cloud by
    comparing the absorption signatures of stars visible behind the cloud ...
    any patterns that appear for all stars visible behind the cloud are likely
    signatures of atoms in the cloud?

    -- Downward energy transitions produce a chemical fingerprint of emission
    lines


    Doppler Effect 
    
    Z = Δλ/λ_rest = ( λ_obs - λ_rest )/λ_rest = v/c, where v is
    the relative velocity away from us and c is the speed of light.

May 23, 2023

    Telescope Formulae

        Magnification

            M = ( focal length of objective lens ) / ( focal length of eyepiece lens )

        The larger the collecting area, the more information the telescope gathers

            Area = ( pi/4 ) * D^2

        Angular resolution

            Angular resolution theta is a function of the diameter of the
            telescope and the λ ... The ultimate resolution is determined by the
            interference of light waves within a telescope

        Diffraction-limited angular resolution:

            θ = 2.5E5 λ / D
            λ, D are in meters

            - ideal is small λ and large D
        
            - Atmospheric turbulence can cause distortion and reduce angular
            resolution
        
    Telescope types:
        - refracting - large and long, point up, so not feasible for large telescopes
        - reflecting telescopes use mirrors

    instruments in telescopes:
        Photometers measure intensity Cameras or CCDs (Charged Coupled Devices),
        with filters to choose wavelength Spectrographs split light into the
        wavelength spectrum and measure the intensity at each wavelength

        astronomers also measure intensity vs time

    Idea: circumsolar satellite array: send off satellites which propel
    themselves towards the sun and away from Earth's orbit a small distance, and
    then enter solar orbit. We build up a circumsolar array of satellites which
    function as an orbit-wide telescope, and also enable solar-system-wide
    communications for communicating with mars and beyond when it is on the
    other side of the sun from us. If they orbit faster than us, we will be able
    to fill the array easily with timed release and also service/replace any
    particular satellite as we go by.

    Notes on MEGA-MASERS AND GALAXIES:

         Abstract

            Definitions/terms

                AGN: active galactic nuclei 
                
                Seyfert2 spectral characteristic: sharp spike on the emission graph,
                not much doppler spread whereas seyfert 1 would have both narrow and
                broad emission signatures as well, indicating a mix of high-velocity
                gas and low velocity gas. E.G., our field of view is not blocked by
                dust clouds with Seyfert 1, as the galaxy is viewed top-down,
                whereas the galaxy is viewed from the side for seyfart 2

                LINER spectral characteristic: weak emission characteristics,
                associated with nebulas which have not been ionized as much. 

                Very Long Baseline Interferometry (VLBI) A technique of using
                multiple telescopes around the world to view the same object, then
                combining the result for a world-wide effective telescope diameter.

                level population - the energy level of particles in a gas.

                Inverted level population - abnormally excited level population
                - does not occur when thermal equilibrium is achievable  

            Summary of Abstract:
        
                Masers seem to be produced near new stars. It is assumed that
                masers are produced by fields of gas which is abnormally excited
                (Inverted level population)... which can occur because of the
                low density of cosmic gas preventing thermal equilibrium. Masers
                are formed when the inverted population gas releases its energy
                as light in a specific wavelength of microwave radiation.
                
                MegaMasers come from the active center of galaxies, and are
                assumed to be associated with accretion disks of supermassive
                black holes. The megamasers come from gas that is at relatively
                high density (though still low enough to prevent thermal
                equilibrium) 

                Water megamasers are found within a few lightyears of the center
                of the galaxy, while hydroxyl megamasers come from
                star-formation fields within a few hundred lightyears of the
                center of the galaxy. 

                Water megamasers have seyfert 2 and LINER type spectral
                features, and are associated with spiral and sometimes
                elliptical galaxies (which also suggests central galactic
                black-hole activity?)

                Hydroxyl megamasers are associated with IR galaxies and the
                brightness of the megamaser is proportional to the brightness of
                the galaxy's IR emission.

                VLBI is used to get high-resolution spectral analysis of masers,
                which is possible because of how bright the masers are. The
                resolution is good enough to compare different regions separated
                under 1 parsec.

                Megamasers are also amazing tools for determining the distance
                to the galaxy due to the brightness and high spatial resolution
                possible.

                The purpose of the paper is to give evidence that star-forming
                dust exposed to intense IR galaxy-light typically forms OH
                megamasers. The paper also speculates that during the early
                universe, when IR radiation from young stars was much more
                prevalent, mega maser formation was also more prevalent,
                possibly forming masers of larger orders of magnitude than
                currently observed. If that is the case, then future surveys of
                deep space may reveal such gigamasers from the distant past. 
                That would be very useful for a data point in determining the
                rate of expansion of space.

            Summary of section 1:

                Masers require 3 things:

                1) population inversion (with an energy source) 
                
                2) velocity coherence - the molecules that will produce the
                maser must be moving in about the same direction and at about
                the same speed from our vantage point.

                3) the two above conditions must be met over a significant
                length through the molecule field so as to create an
                amplification of the microwaves.

                There are two types of Pumping mechanisms:

                1) collisional pumping: collisions between molecules create the
                high-energy state. Collisional pumping has an upper bound on the
                intensity of maser that can be produced by increasing the
                density of gas.

                2) radiative pumping: IR photons are absorbed by the molecules

                "The IR spectral energy distribution of dust emission from star
                forming regions typically peaks at 60 μm to 100 μm,
                corresponding to much lower dust temperature, at 30–50 K. This
                suggests that the source of OH maser emission has to be quite
                close to the energy and heating source, and therefore spatially
                relatively confined." pg 632 S1.3

                Masers need gaseous water. Gaseous water is rare except in
                diffuse gas clouds and in star nurseries.
                
                In figure 2, it is noted that all the masers have a small
                velocity spread with their neighbors, and that they are all near
                energy sources.

                Interstellar masers are brighter than masers near stars

                So far, we have looked at masers from The Galaxy.
                Now, we turn to masers from other galaxies.

                Until the 1970's, we did not have the sensitivity to detect
                intergalactic masers. After that, masers were detected from
                galactic sources that were similar to masers from star forming
                regions in our own galaxy.

                Then in 1979, an extragalactic maser 10x as strong as masers from our
                Galaxy was observed.


                Other similar very bright masers were found
                At first it was thought that the high intensity was from many
                masers acting together, but becuase the signal varied in time,
                that was not likely.

                It was proposed that extragalactic masers form in gas around an
                active galactic nucleus, which is on a scale orders of magnitude
                larger than the masers around stars in our galaxy. The energy
                source for extragalactic masers is the galactic core itself.

                That proposal was not accepted until evidence was found in a
                galaxy where it was observed that 



            Questions: 

                1) would a high incidence of microwave masers have an effect on
                water-based planets in the local area? ... since microwaves are
                known to be absorbed by and heat up water.

                2) *why* do astronomers use cm as a common unit of measurement
                of the size of astronomical distances? *why*

                3) Figure 2 shows the positions and velocities of H2o masers. Many
                masers in the same vicinity have similar velocities. Is that an
                example of the velocity coherence mentioned?

                4) On page 634, it refers to "In 1979, unexpectedly strong emission
                (10 Jy) from an edge-on galaxy" ... hold on, I thought that the
                strongest possible masers would be produced by galaxies we saw
                from above the disk, such that dust in the disk did not block
                our view.

    SQL

        Sql (Structured query language) is a programming language to ask a
        database for its records. For SDSS, each record is the information
        of a single observation of a single object in the sky.

        The database is a series of tables. Each table contains one type of
        data. (for example about the spectrum of an object) Each table has a
        series of columns. The column could store position, or magnitude or
        intensity.
        
        ```
            select ra,dec, objTypeName
            from specObj
            where ra BETWEEN 194.25 and 194.75 AND
            dec BETWEEN 2.5 and 2.75 AND
            objType = 0
        ```    

        Schema Browser lets you discover what data is where.
        http://cas.sdss.org/dr7/en/help/browser/browser.asp
        
May 24 2023

    Continuing SQL ...

    When comparing string values, use 'SINGLE_QUOTES'
    
    Common SpecObj (Spectroscopically analyzed objects) table columns
        http://cas.sdss.org/dr7/en/help/howto/search/commonsearch.asp#top
    
        and for PhotoObj:
        http://cas.sdss.org/dr7/en/help/howto/search/commonsearch.asp#top

        Copy a table to my own database

        SELECT *
        FROM ConstantinResearchGroup.anconsta.CLASS_subset_Satyapal22
        INTO MyDB.CLASS_subset_Satyapal22


        start with an comparison radius of 5 arcsec
    
    Databases

        MCPMaser2020 - All masers know to man as of 2020 (about 180)

        AllSurveyed2021_NoDup - a bunch of
        surveyed galaxies with and without masers

    https://skyserver.sdss.org/CasJobs/MyDB.aspx

    Goal 1:
        Compare the two databases, and get a database of galaxies without masers.

        sql functions
        SQRT()
        COS(a) - cos of angle a in radians 
        POWER(a,b) a^b
        PI()
        use the small angle approximation of angular distance

        theta = SQRT((POWER( ( ( ra_a - ra_b )*( COS( dec_a )) ),2) )+(POWER(( dec_a - dec_b ),2)))

        where ra_a, ra_b, and dec_a, dec_b are in radians

        to convert from degrees to radians, multiply deg by (PI()/180)

        theta = ( SQRT((POWER( ( ( (ra_a * (PI()/180)) - (ra_b * (PI()/180)) )*( COS( (dec_a * (PI()/180)) )) ),2) )+(POWER(( (dec_a * (PI()/180)) - (dec_b * (PI()/180)) ),2))) ) * (180/PI())

        so now theta is in degrees.

        We want to use a search radius of x arcsec, so that is x/3600 degrees

        if theta < search radius, then the two objects are the same

        if there is an object in both tables, then we don't want it.

        English version 1
        for each database record in AllSurveyed2021_NoDup,
        if the dec distance is within 5/3600 degrees of 

        -- continued in code --


May 30 2022

    Last week, I used the angular separation of two sky points to find
    "duplicates" in the no duplicates table by comparing their angular separation.

    This produces duplicates and non-duplicates. I cannot use angular separation
    alone since there are good data galaxies separated by an angular separation
    smaller than the supposed angular separation of duplicate objects.

    To achieve meaningful data quality without throwing away good data, I will
    have to use python and compare the names of the objects.

    Today, I need to compare ConstantinResearchGroup.mcpikeej.nonmasers_noduplicates
    which has been cleansed of duplicates to my method of finding duplicates. 

        -- copy the database:
            ```
            SELECT *
            FROM ConstantinResearchGroup.mcpikeej.nonmasers_noduplicates
            INTO MyDB.mcpikeej_nonmasers_noduplicates
            ```

        -- run the distance comparison:
            ```
            SELECT  t1.sourcename AS P_Name,
            t1.count2019_01 AS entryID1,
            t1.ra AS P_ra, 
            t1.dec AS P_dec,
            t2.sourcename AS S_Name,
            t2.count2019_01 AS entryID2,
            t2.ra AS S_ra,
            t2.dec AS S_dec

            FROM mcpikeej_nonmasers_noduplicates t1, mcpikeej_nonmasers_noduplicates t2

            WHERE
            -- the two objects are not the same literal entry
            t1.sourcename <> t2.sourcename AND
            -- ensure that each pair is returned only once
            t1.count2019_01 < t2.count2019_01 AND
            -- the distance between a pair is less than the threshold
            (0.5/3600.0) > ( SQRT((POWER( ( ( (t1.ra * (PI()/180.0)) - (t2.ra * (PI()/180.0)) )*( COS( (t1.dec * (PI()/180.0)) )) ),2) )+(POWER(( (t1.dec * (PI()/180.0)) - (t2.dec * (PI()/180.0)) ),2))) ) * (180.0/PI())
            ```

            this returns 73 pairs. I made compare_two_objects_with_ned.ipynb to
            check ned for two objects. It seems many of the duplicates found by
            distance are in fact duplicates.

            for example, searching NED for NGC1144 gives: Results for object NGC
            1144 (NGC1142) which is AKA NGC1142

            so,
            radius of .125 arcsec gives 36 pairs
            radius of .25 arcsec gives 40 pairs
            radius of .5 arcsec gives 73 pairs
            radius of 1 arcsec gives 82 pairs,
            radius of 2 arcsec gives 89 pairs,
            radius of 4 arcsec gives 111 pairs.

            My guess is that there are at least 60 duplicates in the data.

            ----------------------------------------

            My goal is to get a no masers table. 

            I have worked on use_np_csv, it is becoming my main notebook for
            analysis of data. It will be the notebook which gets a no_masers
            table

            So far, I have gotten to the stage of querying NED to determine if a duplicate is a duplicate.
May 31st 2023

    I have finished the NED data cleansing script. I decided to make it its own
    script so it can be used for other datasets, not just maser comparison

June 1st
    I read the Class paper. Of the data surveyed from SDSS, only 0.027% of the
    galaxies displayed coronal line emissions consistent with AGN activity.

    Therefore we can make the prediction that a similar percentage of galaxies
    in other datasets, which are also subsets of the SDSS, will be found in the
    coronal line signature (CLASS) database.

    TL;DR, we would be lucky to find one maser galaxy in the CLASS database.
    (remember to only get the subset of masers in SDSS)

    Unless ... there is a correlation between being a maser-producing galaxy and
    being a coronal emission galaxy.

    Next step is to cleanse some data. [DONE] 
    
    Then, make nonmasers. [NEXT]
    
    Then, make
    predictions. Then, get SDSS subsets of -> masers and -> nonmasers.

    Note: astropy.search_around_sky seems to not catch everything the first
    time. I keep being able to run the cleanser and still get (diminishing)
    results.
June 2nd

    make nonmasers 
    [DONE]

    make predictions:
        ~.027% of objects in non_masers will be in the CLASS database.
            Since the nonmasers database has 4934 objects, that is about 1 or 2
            objects.
        About .027% of objects in masers will be in CLASS database.
            Since the masers database has 180 objects, that is .05 objects.
            There is a 1 in 20 chance that there will be any masers in the CLASS
            database. If we find significantly than that number of masers in the
            CLASS database, then we can assume that there is some correlation
            between masers and CLASS database objects
    [DONE]
    
    Next, get SDSS subsets of masers and nonmasers. This is important because
    CLASS is a subset of SDSS.
        Once I have my new SDSS subset databases, I should re-make the
        predictions above.

    -- Select all supposed masers from all_surveyed where the radius of
    definition is less than 5 and greater than 1 arcsec 
    
    SELECT * FROM
    all_surveyed_no_dupes_cleansed4x S WHERE 
        S.[mcp_count] IN (
            SELECT S.[mcp_count]
            FROM all_surveyed_no_dupes_cleansed4x S, MCPMaser2020 M
            WHERE
            -- Small angular distance approximation
            (5.0/3600.0) > ( SQRT((POWER( ( ( (S.[ra] * (PI()/180.0)) - (M.[RA_(J2000)] * (PI()/180.0)) )*( COS( (S.[dec] * (PI()/180.0)) )) ),2) )+(POWER(( (S.[dec] * (PI()/180.0)) - (M.[Dec_(J2000)] * (PI()/180.0)) ),2))) ) * (180.0/PI()) AND
            (1.0/3600.0) < ( SQRT((POWER( ( ( (S.[ra] * (PI()/180.0)) - (M.[RA_(J2000)] * (PI()/180.0)) )*( COS( (S.[dec] * (PI()/180.0)) )) ),2) )+(POWER(( (S.[dec] * (PI()/180.0)) - (M.[Dec_(J2000)] * (PI()/180.0)) ),2))) ) * (180.0/PI())
        )

    -- returns 13 results

    -- Select all supposed masers from all_surveyed where the radius of
    definition is less than 5 and greater than 3 arcsec 

    -- returns 2 results


    SELECT *
    FROM MCPMaser2020 M
    WHERE 
        M.[count2019] IN (
            SELECT M.[count2019]
            FROM all_surveyed_no_dupes_cleansed4x S, MCPMaser2020 M
            WHERE
            -- Small angular distance approximation
            (5.0/3600.0) > ( SQRT((POWER( ( ( (S.[ra] * (PI()/180.0)) - (M.[RA_(J2000)] * (PI()/180.0)) )*( COS( (S.[dec] * (PI()/180.0)) )) ),2) )+(POWER(( (S.[dec] * (PI()/180.0)) - (M.[Dec_(J2000)] * (PI()/180.0)) ),2))) ) * (180.0/PI()) AND
            (1.0/3600.0) < ( SQRT((POWER( ( ( (S.[ra] * (PI()/180.0)) - (M.[RA_(J2000)] * (PI()/180.0)) )*( COS( (S.[dec] * (PI()/180.0)) )) ),2) )+(POWER(( (S.[dec] * (PI()/180.0)) - (M.[Dec_(J2000)] * (PI()/180.0)) ),2))) ) * (180.0/PI())
        )



    SELECT *
    FROM MCPMaser2020 M
    WHERE 
        M.[count2019] IN (
            SELECT M.[count2019]
            FROM all_surveyed_no_dupes_cleansed4x S, MCPMaser2020 M
            WHERE
            -- Small angular distance approximation
            (6.0/3600.0) > ( SQRT((POWER( ( ( (S.[ra] * (PI()/180.0)) - (M.[RA_(J2000)] * (PI()/180.0)) )*( COS( (S.[dec] * (PI()/180.0)) )) ),2) )+(POWER(( (S.[dec] * (PI()/180.0)) - (M.[Dec_(J2000)] * (PI()/180.0)) ),2))) ) * (180.0/PI()) AND
            (5.0/3600.0) < ( SQRT((POWER( ( ( (S.[ra] * (PI()/180.0)) - (M.[RA_(J2000)] * (PI()/180.0)) )*( COS( (S.[dec] * (PI()/180.0)) )) ),2) )+(POWER(( (S.[dec] * (PI()/180.0)) - (M.[Dec_(J2000)] * (PI()/180.0)) ),2))) ) * (180.0/PI())
        )


June 5th
    -- Creates a subset of all_surveyed_no_masers that is also in the SDSS database. 
    SELECT S.*, M.specObjID as specObjID, M.bestObjID as bestObjID, M.plateID as plateID, M.fiberID as fiberID, M.mjd as mjd
    FROM all_surveyed_cleansed4x_no_maser_no_duplicates S, DR8.SpecObjAll M
    WHERE 
        -- Small angular distance approximation
        (5.0/3600.0) > ( SQRT((POWER( ( ( (S.[ra] * (PI()/180.0)) - (M.[ra] * (PI()/180.0)) )*( COS( (S.[dec] * (PI()/180.0)) )) ),2) )+(POWER(( (S.[dec] * (PI()/180.0)) - (M.[dec] * (PI()/180.0)) ),2))) ) * (180.0/PI())
    INTO myDB.all_surveyed_no_maser_in_SDSS_DR8_potential_dup_bestobjid



    -- Creates a subset of masers that is also in the SDSS database. 
    SELECT M.*, S.specObjID as specObjID, S.bestObjID as bestObjID, S.plateID as plateID, S.fiberID as fiberID, S.mjd as mjd
    FROM MCPMaser2020 M, DR8.SpecObjAll S
    WHERE
    -- Small angular distance approximation
    (5.0/3600.0) > ( SQRT((POWER( ( ( (S.[ra] * (PI()/180.0)) - (M.[RA_(J2000)] * (PI()/180.0)) )*( COS( (S.[dec] * (PI()/180.0)) )) ),2) )+(POWER(( (S.[dec] * (PI()/180.0)) - (M.[Dec_(J2000)] * (PI()/180.0)) ),2))) ) * (180.0/PI())
    INTO myDB.masers_in_SDSS_DR8_potential_dup_bestobjid



    While that's running, lets see just how many masers are in CLASS:

    SELECT S.*, C.SPECOBJID as SpecObjID
    FROM MCPMaser2020 M, CLASS_subset_Satyapal22 C
    WHERE
    -- Small angular distance approximation
    (6.0/3600.0) > ( SQRT((POWER( ( ( (M.[RA_(J2000)] * (PI()/180.0)) - (C.[RA] * (PI()/180.0)) )*( COS( (M.[Dec_(J2000)] * (PI()/180.0)) )) ),2) )+(POWER(( (M.[Dec_(J2000)] * (PI()/180.0)) - (C.[DEC] * (PI()/180.0)) ),2))) ) * (180.0/PI())

        count2019	Source_Name	    RA_(J2000)	Dec_(J2000)	Vsys_(km/s)	Lum	Class	SpecObjID
        117	        NGC_4922	    195.355	    29.31389	7056	    200	?	    2264320011294238720
        126	        NGC_5347	    208.3242	33.49083	2335	    32	?	    2383626653969442816
        140	        CGCG_164-019	221.4033	27.03472	8963	    30	?	    2411797517822879744
        141	        NGC_5765b	    222.7146	5.114444	8333	    ?	D	    2060464800869148672
        158	        J1658+3923	    254.5646	39.39139	10290	    672	?	    712824968039131136


    -- remove duplicates of masers in SDSS maser subset by count2019
        SELECT t.*
        FROM (
            SELECT T.*, ROW_NUMBER() OVER (PARTITION BY count2019 ORDER BY specObjID) AS row_num
            FROM masers_in_SDSS_DR8_potential_dup_bestobjid T
        ) t
        WHERE t.row_num = 1
        INTO masers_in_SDSS_DR8_no_dup
    
    -- returns 64 results

    Predictions:

    We have 64 unique masers in the SDSS database (DR8). If only 0.027% of those
    are CLASS database objects, then that means that there should be .0173
    masers in the CLASS database, assuming there is no correlation between
    masers and CLASS objects. In other words, we should have about 1.7 out of a
    hundred chance to find masers in the CLASS catalogue

    Notes:

    masers_in_SDSS_DR8_potential_dup_bestobjid has duplicates of count2019 and
    bestobjID masers_in_SDSS_DR8_no_dup throws out those duplicates, but does
    not necassarily keep the specobjIDs that are in CLASS. Therefore, when
    comparing specObjIds, use masers_in_SDSS_DR8_potential_dup_bestobjid.

    SELECT M.*
    FROM masers_in_SDSS_DR8_potential_dup_bestobjid M, CLASS_subset_Satyapal22 C
    WHERE M.specObjID = C.SPECOBJID

    This gives 5 unique objects that are in CLASS and are masers. 5/.0173 =
    289.35 So, a CLASS object (which is typically an AGN) is 289x more likely to
    contain a maser than random sampling would predict.

    -- Make sure CLASS has no object duplicates
    SELECT C.*, S.bestObjID
    FROM DR8.SpecObjAll S, CLASS_subset_Satyapal22 C
    WHERE C.SPECOBJID = S.specObjID
    INTO Class_with_bestobjids

June 6th

    -- create MCPMaser2023

    SELECT M.count2019 as UID,
    M.Source_Name,
    M.[RA_(J2000)] as ra,
    M.[Dec_(J2000)] as dec,
    M.[Vsys_(km/s)] as Vsys_in_km_per_s,
    M.Lum as Lum_2020,
    M.Class as objClass_sym,
    CASE
        WHEN M.Class = '?' THEN 0
        WHEN M.Class IN ('SF', 'SF?') THEN 1
        WHEN M.Class = 'J' THEN 2
        WHEN M.Class IN ('D+J', 'D?J', 'D+J') THEN 3
        WHEN M.Class IN ('D?', 'D+?', 'D+') THEN 4
        WHEN M.Class = 'D' THEN 5
    END AS objClass_int

    FROM MCPMaser2020 M
    INTO MCPMaser2023


    Used data_from_latex.ipynb to convert the latex data of the 2018 paper with masers into a csv.
    I edited the headers by hand.

June 7th

    SELECT
        UID,
        Source_Name,
        ra,
        dec,
        CASE
            WHEN lum_from_2018_paper > COALESCE(TRY_CAST(Lum_2020 AS DECIMAL(10, 2)), 0.0) THEN lum_from_2018_paper
            ELSE COALESCE(TRY_CAST(Lum_2020 AS DECIMAL(10, 2)), 0.0)
        END AS bestLum,
        Vsys_in_km_per_s,
        Lum_2020,
        objClass_sym,
        objClass_int,
        lum_from_2018_paper,
        Dist_from_2018_paper,
        Name_in_2018_paper_db

    FROM
        MCPMasers2023_w_lum2018
    INTO MCPMasers2023_w_lum2018_bestlum





    -- remove duplicates of masers in SDSS nomaser subset by mcp_count
    SELECT t.*
    FROM (
        SELECT T.*, ROW_NUMBER() OVER (PARTITION BY mcp_count ORDER BY specObjID) AS row_num
        FROM all_surveyed_no_maser_in_SDSS_DR8_potential_dup_bestobjid T
    ) t
    WHERE t.row_num = 1
    INTO Nomasers_in_SDSS_DR8_no_dup
    
    -- returns 2363 results

    Predictions:

    We have 2363 unique nonmasers in the SDSS database (DR8). If only 0.027% of
    those are CLASS database objects, then that means that there should be .63
    nonmasers in the CLASS database. In other words, we should have about 1 out
    of 2 chance to find nonmasers in the CLASS catalogue.


    SELECT M.*
    FROM all_surveyed_no_maser_in_SDSS_DR8_potential_dup_bestobjid M, CLASS_subset_Satyapal22 C
    WHERE M.specObjID = C.SPECOBJID

    This returns 35 objects, much more than expected.
    

June 8 

    MCPMaser2023 has some errors with string-matching with the luminosity from
    the 2018 paper. I will import the CSV file into libreOffice calc, and fix
    those few errors by hand.
        > for each maser which I noticed was not matched properly, I checked if
        I could find it in the 2018 paper, and if not, I corrected the CSV 
        
        > for each maser that my string matching script could not match, I
        checked if I could match it in the 2018 paper by ctrl-f, I found 1 or
        two that I could batch by hand that way.

    
    SELECT N.*, O.specObjID, O.bestObjID, O.plateID, O.fiberID, O.mjd
    FROM masers_in_SDSS_DR8_potential_dup_bestobjid O, MCPMaser2023 N
    WHERE O.Source_Name = N.Source_Name
    INTO masers_in_SDSS_DR8_potential_dup_bestobjid_with_lum


    SELECT N.*, O.specObjID, O.bestObjID, O.plateID, O.fiberID, O.mjd
    FROM masers_in_SDSS_DR8_no_dup O, MCPMaser2023 N
    WHERE O.Source_Name = N.Source_Name
    INTO masers_in_SDSS_DR8_no_dup_with_lum


    -- I will run the masers_in_SDSS query again, just to be sure that there are
    the same number of objects as in my current table. It is possible I used 6
    arcsec to create the current table rather than the 5 that I should have used.

        -- Creates a subset of masers that is also in the SDSS database. 
        SELECT M.*, S.specObjID as specObjID, S.bestObjID as bestObjID, S.plateID as plateID, S.fiberID as fiberID, S.mjd as mjd
        FROM MCPMaser2023 M, DR8.SpecObjAll S
        WHERE
        -- Small angular distance approximation
        (5.0/3600.0) > ( SQRT((POWER( ( ( (S.[ra] * (PI()/180.0)) - (M.[ra] * (PI()/180.0)) )*( COS( (S.[dec] * (PI()/180.0)) )) ),2) )+(POWER(( (S.[dec] * (PI()/180.0)) - (M.[dec] * (PI()/180.0)) ),2))) ) * (180.0/PI())

    if I used 5 arcsec, it should return 71 results. ... It does return 71
    results; my original data was good.

    Next, cross reference my masers and non-masers with Class again, verifying PLATE, MJD, and FIBERID
    
    ==========================
    SELECT M.*
    FROM masers_in_SDSS_DR8_potential_dup_bestobjid_with_lum M, CLASS_subset_Satyapal22 C
    WHERE M.specObjID = C.SPECOBJID and M.plateID = C.PLATE and M.fiberID = C.FIBERID and M.mjd = C.MJD
    ==========================

    This returns 0 objects, and only works when I only compare specObjID. Lets find out why.
    ==========================
    SELECT  M.specObjID As M_spec, 
            C.SPECOBJID as C_spec, 
            M.plateID as M_plate,
            C.PLATE as C_plate,
            M.fiberID as M_fiber,
            C.FIBERID as C_fiber,
            M.mjd as M_mjd,
            C.MJD as C_mjd
    FROM masers_in_SDSS_DR8_potential_dup_bestobjid_with_lum M, CLASS_subset_Satyapal22 C
    WHERE M.specObjID = C.SPECOBJID
    
    ==========================

    The results:

    M_spec	            C_spec	            M_plate	            C_plate	M_fiber	C_fiber	M_mjd	C_mjd
    2060464800869148672	2060464800869148672	2060396906026133504	1830	247	    247	    54560	54560
    2264320011294238720	2264320011294238720	2264184771364022272	2011	492	    492	    53499	53499
    2383626653969442816	2383626653969442816	2383530171824105472	2117	351	    351	    54115	54115
    2411797517822879744	2411797517822879744	2411677671055452160	2142	436	    436	    54208	54208
    712824968039131136	712824968039131136	712694675911239680	633	    474	    474	    52079	52079

    ==========================
    Sooo... why are the plate IDs different?

        > Because I needed SpecObjAll.plate, not SpecObjAll.PlateID. Thats easy to fix:

        -- Step 1: Add a new column to the existing table
        ALTER TABLE masers_in_SDSS_DR8_potential_dup_bestobjid_with_lum
        ADD plate smallint
        go
        -- Step 2: Update the values of the new column based on a join with DR8.SpecObjAll
        UPDATE masers_in_SDSS_DR8_potential_dup_bestobjid_with_lum
        SET plate = S.plate
        FROM DR8.SpecObjAll S
        WHERE masers_in_SDSS_DR8_potential_dup_bestobjid_with_lum.specObjID = S.specObjID

        =====

        -- Step 1: Add a new column to the existing table
        ALTER TABLE masers_in_SDSS_DR8_no_dup_with_lum
        ADD plate smallint
        go
        -- Step 2: Update the values of the new column based on a join with DR8.SpecObjAll
        UPDATE masers_in_SDSS_DR8_no_dup_with_lum
        SET plate = S.plate
        FROM DR8.SpecObjAll S
        WHERE masers_in_SDSS_DR8_no_dup_with_lum.specObjID = S.specObjID

        =====

        -- Step 1: Add a new column to the existing table
        ALTER TABLE all_surveyed_no_maser_in_SDSS_DR8_potential_dup_bestobjid
        ADD plate smallint
        go
        -- Step 2: Update the values of the new column based on a join with DR8.SpecObjAll
        UPDATE all_surveyed_no_maser_in_SDSS_DR8_potential_dup_bestobjid
        SET plate = S.plate
        FROM DR8.SpecObjAll S
        WHERE all_surveyed_no_maser_in_SDSS_DR8_potential_dup_bestobjid.specObjID = S.specObjID

    Now that I actually have the plate number, lets run the comparison again:

    =================================
    SELECT M.*
    FROM masers_in_SDSS_DR8_potential_dup_bestobjid_with_lum M, CLASS_subset_Satyapal22 C
    WHERE M.specObjID = C.SPECOBJID and M.plate = C.PLATE and M.fiberID = C.FIBERID and M.mjd = C.MJD
    INTO Masers_In_Class
    =================================
    Lets do the comparison for nonmasers:

    SELECT M.*
    FROM all_surveyed_no_maser_in_SDSS_DR8_potential_dup_bestobjid M, CLASS_subset_Satyapal22 C
    WHERE M.specObjID = C.SPECOBJID and M.plate = C.PLATE and M.fiberID = C.FIBERID and M.mjd = C.MJD
    INTO NonMasers_In_Class

    I also need to get how many unique objects are in SDSS and in nonmasers:

            -- remove duplicates of masers in SDSS nomaser subset by mcp_count
            SELECT t.*
            FROM (
                SELECT T.*, ROW_NUMBER() OVER (PARTITION BY mcp_count ORDER BY specObjID) AS row_num
                FROM all_surveyed_no_maser_in_SDSS_DR8_potential_dup_bestobjid T
            ) t
            WHERE t.row_num = 1
            INTO Nomasers_in_SDSS_DR8_no_dup

Jun 13
    results:
        Masers:

            FM = 5 CLASS masers / 64 SDSS surveyed masers = .078
            7.8% of surveyed masers in SDSS are in CLASS

            Error (assuming error in counting is sqrt of counted value):
                CM = 5, TM = 64
                dCM = sqrt(5) = 2.24, dTM = sqrt(64) = 8
                dFM = abs(FM)*sqrt((dCM/CM)^2+(dTM/TM)^2)
                dFM = .078*sqrt((2.24/5)^2+(8/64)^2) = .0363
            With error:
                7.8% +/- (3.6%) of surveyed masers in SDSS are in CLASS
        Nonmasers:

            FN = 35 CLASS nonmasers / 2363 SDSS surveyed nonmasers = .0148
            1.48% of surveyed nonmasers in SDSS are in CLASS

            Error (assuming error in counting is sqrt of counted value)
                CN = 35, TN = 2363
                dCN = sqrt(35) = 5.92, dTN = sqrt(2363) = 48.61
                            dFN = abs(FN)*sqrt((dCN/CN)^2+(dTN/TN)^2)
                dFN = abs(.0148)*sqrt((5.92/35)^2+(48.61/2363)^2) = .0148 * sqrt(.0286 + 4.23E-4) = .0025
            With Error:
                1.48% +/- (.25%) of surveyed nonmasers in SDSS are in CLASS

                

        Notes/conclusions:

            get how much more likely a maser is to be a CLASS object than a nonmaser from the survey:

                7.8% +/- (3.6%)  /   1.48% +/- (.25%)

                F = 7.8/1.48 = 5.27
                M = 7.8 , N = 1.48
                dM = 3.6 , dN = .25

                dF = abs(5.27) * sqrt( ( 3.6/7.8 )^2 + ( .25/1.48 )^2 ) = 5.27 * sqrt( 2.13 + .0285 ) = 7.74




            From the subset of the survey which was in SDSS DR8, an object was
            5.2 +/- (7.74) times more likely to be in CLASS if it was a maser than if it
            was a nonmaser.

            Because the uncertainty includes 0 percent, we would need more data
            to be sure that a maser has a statistically significant higher
            chance to be a CLASS object than a nonmaser. However, there seems to
            be a significant difference between masers and nonmasers, possibly
            5x more likely for a maser to be.



        SELECT C.SPECOBJID,
            C.N_CL_DETECT,
            C.FEXI_7892_LOGL,
            C.SXII_7609_LOGL,
            C.FEX_6374_LOGL,
            C.FEVII_6087_LOGL,
            C.FEVII_5720_LOGL,
            C.ARX_5533_LOGL,
            C.FEVI_5335_LOGL,
            C.CAV_5309_LOGL,
            C.FEXIV_5303_LOGL,
            C.FEVII_5276_LOGL,
            C.FEVI_5176_LOGL,
            C.FEVII_5159_LOGL,
            C.FEVI_5146_LOGL,
            C.FEVII_4893_LOGL,
            C.FEV_4181_LOGL,
            C.FEV_3891_LOGL,
            C.FEV_3839_LOGL,
            C.FEVII_3759_LOGL,
            C.NEV_3426_LOGL,
            C.NEV_3346_LOGL,
            C.ARIII_7135_LOGL,
            C.SII_6731_LOGL,
            C.SII_6717_LOGL,
            C.NII_6584_LOGL,
            C.H_ALPHA_LOGL,
            C.NII_6548_LOGL,
            C.OI_6302_LOGL,
            C.HEI_5876_LOGL,
            C.OIII_5007_LOGL,
            C.OIII_4959_LOGL,
            C.H_BETA_LOGL,
            C.OIII_4363_LOGL,
            C.H_GAMMA_LOGL,
            C.H_DELTA_LOGL,
            C.NEIII_3869_LOGL,
            C.OII_3729_LOGL,
            C.OII_3726_LOGL
        FROM CLASS_subset_Satyapal22 C, Masers_In_Class M
        WHERE C.SPECOBJID = M.specObjID

June 15th

    One maser is a Disk; the other four are completely unknown, so we cannot really say much about their diskiness

June 20th

    3.125% +/- 2.24% of masers have the Fe XI 7892 coronal line, while only 0.127 % +/- .073% of nonMasers have that line.

    6.25 % +/- 3.22% of masers have both Fe X 6374 Coronal line and Fe VII 6087 coronal line, while only 1.1 % +/- .22 % of nonmasers have these lines

    7.81 % +/- 3.63 % of masers have Fe VII 5720 Coronal line, while only 1.14 % +/- .22% of nonmasers have that line.

    While not statistically significant, it is noteworthy that of the 5 masers with coronal lines, one had Ca V 5309 coronal line detection, while no nonmaser had that detection.

June 22

    What were we going to use maser luminosity for?

    Get Cosmic wall or void data

        SELECT S.vflag, S.NSAID, M.*
        FROM masers_in_SDSS_DR8_potential_dup_bestobjid_with_lum M, void_catalog_anish S
        WHERE
        S.PLATE = M.plate AND
        S.FIBERID = M.fiberID AND
        S.MJD = M.mjd
        INTO Masers_in_SDSS_with_location 

        --> finds 54 masers with void_catalog_anish counterparts, vs 64 unique masers
        
        24/54 are in a cosmic wall. 44.4% +/- 10.9%
        10/54 are in a cosmic void. 18.5% +/- 6.4%
        15/54 are in an edge, 27.8% +/- 8.1% (within the SDSS DR7 main survey footprint, but not in a void and too close to the edge to definitively classify as a wall)
        5/54, 9.3% +/- 4.3%, are outside the SDSS DR7 main survey footprint




        SELECT S.vflag, S.NSAID, M.*
        FROM all_surveyed_no_maser_in_SDSS_DR8_potential_dup_bestobjid M, void_catalog_anish S
        WHERE
        S.PLATE = M.plate AND
        S.FIBERID = M.fiberID AND
        S.MJD = M.mjd
        INTO NonMasers_in_SDSS_with_location 

        --> finds 2197 masers with void_catalog_anish counterparts vs 2,363 unique nonmasers
        
        1071/2197 are in a cosmic wall. 48.7% +/- 1.8%
        460/2197 are in a cosmic void. 20.9% +/- 1.1%
        417/2197 are in an edge, 19.0% +/- 1.0% (within the SDSS DR7 main survey footprint, but not in a void and too close to the edge to definitively classify as a wall)
        248/2197 11.3% +/- 0.8% are outside the SDSS DR7 main survey footprint

        CONCLUSION: There is no discernable correlation between a galaxy hosting a maser and its location in a cosmic void or wall.

June 25 2023

    Let megamasers be defined as masers with lum > 10^2 L

    Goal: get Megamaser location data as above, and Disk Maser location data as above

    Megamasers as defined by solar luminosity > 10

        SELECT S.vflag, S.NSAID, M.*
        FROM masers_in_SDSS_DR8_potential_dup_bestobjid_with_lum M, void_catalog_anish S
        WHERE
        S.PLATE = M.plate AND
        S.FIBERID = M.fiberID AND
        S.MJD = M.mjd AND
        M.bestLum > 10
        INTO MegaMasers_10L_in_SDSS_with_location 

            SELECT *
            FROM MegaMasers_10L_in_SDSS_with_location
            WHERE vflag = 9

        --> finds 41 megamasers with void catalog counterparts
        20/41 are in wall = 48.8% +/- 13.3%
        7/41 are in void = 17.1% +/- 7.0%
        10/41 are inconclusive = 24.4% +/- 8.6%
        4/41 are unknown = 9.8% +/- 5.1%

    Disk masers with any disk classification

        SELECT S.vflag, S.NSAID, M.*
        FROM masers_in_SDSS_DR8_potential_dup_bestobjid_with_lum M, void_catalog_anish S
        WHERE
        S.PLATE = M.plate AND
        S.FIBERID = M.fiberID AND
        S.MJD = M.mjd AND
        M.objClass_int = 3 OR M.objClass_int = 4 OR M.objClass_int = 5
        INTO DiskMasers_obj345_in_SDSS_with_location

            SELECT *
            FROM DiskMasers_obj345_in_SDSS_with_location
            WHERE vflag = 0
            
        --> finds 9 Disk masers with void catalog counterparts (there are 11 disk masers in the masers catalog)
        6/9 are in wall = 66.7% +/- 35.1%
        0/9 are in void = 0% +/- undefined error
        1/9 are inconclusive = 11.1% +/- 11.7%
        2/9 are unknown = 22.2% +/- 17.4%

        While there is a significant possibility that Disk masers exist exclusively in walls based on these results, the counting error is too high to say anything with confidence.

        
        

